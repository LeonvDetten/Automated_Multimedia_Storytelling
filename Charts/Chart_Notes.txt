https://mermaid.live/

erDiagram
    USER ||--o{ STORY : creates
    STORY ||--o{ EPISODE : "consists of"
    STORY }|--|{ CHARACTER : "belongs to"
    
    EPISODE ||--o{ CHARACTER : features
    EPISODE ||--o{ MEDIA_ASSET : "has background"
    EPISODE }|--|| THEME_KNOWLEDGE : "pulls insight from"

    STORY {
        uuid id PK
        string title
        text world_setting
    }

    EPISODE {
        uuid id PK
        uuid story_id FK
        int sequence_number
        string theme_keyword "e.g., Betrayal"
        text theme_insight "Retrieved from Vector DB"
        text plot_summary
        text full_script
    }

    CHARACTER {
        uuid id PK
        uuid story_id FK
        string name
        string keywords "e.g., knight, tall, nervous"
        text description
    }

    THEME_KNOWLEDGE {
        uuid id PK
        string topic "e.g., Betrayal"
        vector embedding "Vector of the book text"
        text source_text "The actual knowledge from your book"
    }

    MEDIA_ASSET {
        uuid id PK
        uuid episode_id FK
        string image_url
    }





graph LR
    %% High-Contrast / Deep Mode Styles
    classDef startNode fill:#005f73,stroke:#0a9396,stroke-width:2px,color:#fff;
    classDef logicNode fill:#94d2bd,stroke:#005f73,stroke-width:2px,color:#000;
    classDef dbNode fill:#ee9b00,stroke:#bb3e03,stroke-width:2px,color:#000;
    classDef mediaNode fill:#0a9396,stroke:#005f73,stroke-width:2px,color:#fff;
    classDef dashNode fill:#bb3e03,stroke:#ae2012,stroke-width:2px,color:#fff;

    %% User Input
    Start((Start)) --> Input[User Input]
    class Start input
    class Input startNode

    %% Core Logic (Phase 1)
    Input --> RAG{RAG Check}
    RAG -- Query --> DB[(Database)]
    DB -- Lore --> RAG
    RAG --> LLM[Generate Text]
    LLM --> TextReady[Final Script]
    
    class RAG,LLM,TextReady logicNode
    class DB dbNode

    %% Multimedia Pipeline (Phase 2)
    TextReady --> TTS[Audio Gen]
    TextReady --> VisualGen[Visual Gen]
    
    TTS --> Sync[Final Sync]
    VisualGen --> Sync

    %% Output
    Sync --> Final((Result))
    class TTS,VisualGen,Sync mediaNode
    class Final startNode

    %% Website Monitoring
    LLM -.-> Web[Live Tracker]
    VisualGen -.-> Web
    TTS -.-> Web
    class Web dashNode